import {
  require_es_reflect_get
} from "./chunk-J5DFVZVL.js";
import {
  require_ansi_to_html
} from "./chunk-3F7WW3E7.js";
import {
  init_es_string_ends_with
} from "./chunk-NGJLGQW5.js";
import {
  init_es_object_get_own_property_descriptor
} from "./chunk-32MTNXST.js";
import {
  require_es_reflect_construct
} from "./chunk-RR2HNM4P.js";
import {
  init_es_object_get_prototype_of
} from "./chunk-CFKBCQLG.js";
import {
  StoryStore,
  init_esm as init_esm4
} from "./chunk-KTUVAV7V.js";
import {
  init_es_string_starts_with
} from "./chunk-W2D6HU57.js";
import {
  require_regenerator
} from "./chunk-7A5D66RZ.js";
import {
  init_es_array_join
} from "./chunk-LPLROBCZ.js";
import {
  init_es_string_split
} from "./chunk-PRKSDZJ7.js";
import {
  init_es_string_match
} from "./chunk-NI6SYZXJ.js";
import {
  require_runtime
} from "./chunk-BRGE3CC3.js";
import {
  require_synchronous_promise
} from "./chunk-HW3V75JW.js";
import {
  require_isPlainObject
} from "./chunk-A2M4WVPM.js";
import {
  addons,
  init_public_api
} from "./chunk-ZXUQATKE.js";
import {
  init_es_array_find
} from "./chunk-SMUDPA5R.js";
import {
  init_es_string_search
} from "./chunk-RAZJXK6A.js";
import {
  init_es_number_constructor
} from "./chunk-JFKL56PB.js";
import {
  require_lib
} from "./chunk-3JG7PP5Q.js";
import {
  CONFIG_ERROR,
  CURRENT_STORY_WAS_SET,
  DOCS_RENDERED,
  FORCE_REMOUNT,
  FORCE_RE_RENDER,
  GLOBALS_UPDATED,
  IGNORED_EXCEPTION,
  PRELOAD_STORIES,
  PREVIEW_KEYDOWN,
  RESET_STORY_ARGS,
  SET_CURRENT_STORY,
  SET_GLOBALS,
  SET_STORIES,
  STORY_ARGS_UPDATED,
  STORY_CHANGED,
  STORY_ERRORED,
  STORY_INDEX_INVALIDATED,
  STORY_MISSING,
  STORY_PREPARED,
  STORY_RENDERED,
  STORY_RENDER_PHASE_CHANGED,
  STORY_SPECIFIED,
  STORY_THREW_EXCEPTION,
  STORY_UNCHANGED,
  UPDATE_GLOBALS,
  UPDATE_QUERY_PARAMS,
  UPDATE_STORY_ARGS,
  init_esm as init_esm3
} from "./chunk-FRD2Y65G.js";
import {
  init_es_object_values
} from "./chunk-AKWMTN3F.js";
import {
  init_es_array_from,
  init_es_array_includes,
  init_es_array_map,
  init_es_function_name,
  init_es_object_assign,
  init_es_object_entries,
  init_es_symbol,
  init_es_symbol_description,
  init_es_symbol_iterator
} from "./chunk-OPAZLAKG.js";
import {
  init_es_promise
} from "./chunk-ZFQV7LAJ.js";
import {
  init_es_array_filter
} from "./chunk-VYLTT7BA.js";
import {
  init_es_array_slice,
  init_es_object_freeze,
  init_es_object_keys,
  init_es_regexp_to_string,
  init_web_dom_collections_for_each
} from "./chunk-BNKHNS7O.js";
import {
  require_browser
} from "./chunk-N2FZLRTI.js";
import {
  esm_default,
  init_esm as init_esm2
} from "./chunk-XAJ4SFQJ.js";
import {
  init_es_array_concat,
  init_es_set,
  init_es_string_replace,
  init_esm,
  init_web_dom_collections_iterator,
  logger,
  once,
  require_es_array_iterator,
  require_es_regexp_exec,
  require_es_string_iterator
} from "./chunk-WDY4P2NX.js";
import {
  require_es_object_to_string
} from "./chunk-IPK6NK5O.js";
import {
  require_window
} from "./chunk-XCM4TOIV.js";
import {
  __esm,
  __toESM,
  init_define_ngDevMode
} from "./chunk-XN7ES5DP.js";

// node_modules/@storybook/preview-web/dist/esm/StoryRender.js
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }
  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}
function _asyncToGenerator(fn) {
  return function() {
    var self = this, args = arguments;
    return new Promise(function(resolve, reject) {
      var gen = fn.apply(self, args);
      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }
      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }
      _next(void 0);
    });
  };
}
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
function createController() {
  if (AbortController)
    return new AbortController();
  return {
    signal: {
      aborted: false
    },
    abort: function abort() {
      this.signal.aborted = true;
    }
  };
}
var import_regenerator, import_es_object_to_string, import_runtime, import_global, AbortController, PREPARE_ABORTED, StoryRender;
var init_StoryRender = __esm({
  "node_modules/@storybook/preview-web/dist/esm/StoryRender.js"() {
    init_define_ngDevMode();
    import_regenerator = __toESM(require_regenerator());
    init_es_array_includes();
    init_es_function_name();
    init_es_object_assign();
    import_es_object_to_string = __toESM(require_es_object_to_string());
    init_es_promise();
    import_runtime = __toESM(require_runtime());
    import_global = __toESM(require_window());
    init_esm3();
    AbortController = import_global.default.AbortController;
    PREPARE_ABORTED = new Error("prepareAborted");
    StoryRender = function() {
      function StoryRender2(channel, store, renderToScreen, callbacks, id, viewMode, story) {
        _classCallCheck(this, StoryRender2);
        this.channel = channel;
        this.store = store;
        this.renderToScreen = renderToScreen;
        this.callbacks = callbacks;
        this.id = id;
        this.viewMode = viewMode;
        this.story = void 0;
        this.phase = void 0;
        this.abortController = void 0;
        this.canvasElement = void 0;
        this.notYetRendered = true;
        this.disableKeyListeners = false;
        this.abortController = createController();
        if (story) {
          this.story = story;
          this.phase = "preparing";
        }
      }
      _createClass(StoryRender2, [{
        key: "runPhase",
        value: function() {
          var _runPhase = _asyncToGenerator(import_regenerator.default.mark(function _callee(signal, phase, phaseFn) {
            return import_regenerator.default.wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    this.phase = phase;
                    this.channel.emit(STORY_RENDER_PHASE_CHANGED, {
                      newPhase: this.phase,
                      storyId: this.id
                    });
                    if (!phaseFn) {
                      _context.next = 5;
                      break;
                    }
                    _context.next = 5;
                    return phaseFn();
                  case 5:
                    if (signal.aborted) {
                      this.phase = "aborted";
                      this.channel.emit(STORY_RENDER_PHASE_CHANGED, {
                        newPhase: this.phase,
                        storyId: this.id
                      });
                    }
                  case 6:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, this);
          }));
          function runPhase(_x, _x2, _x3) {
            return _runPhase.apply(this, arguments);
          }
          return runPhase;
        }()
      }, {
        key: "prepare",
        value: function() {
          var _prepare = _asyncToGenerator(import_regenerator.default.mark(function _callee3() {
            var _this = this;
            return import_regenerator.default.wrap(function _callee3$(_context3) {
              while (1) {
                switch (_context3.prev = _context3.next) {
                  case 0:
                    _context3.next = 2;
                    return this.runPhase(this.abortController.signal, "preparing", _asyncToGenerator(import_regenerator.default.mark(function _callee2() {
                      return import_regenerator.default.wrap(function _callee2$(_context2) {
                        while (1) {
                          switch (_context2.prev = _context2.next) {
                            case 0:
                              _context2.next = 2;
                              return _this.store.loadStory({
                                storyId: _this.id
                              });
                            case 2:
                              _this.story = _context2.sent;
                            case 3:
                            case "end":
                              return _context2.stop();
                          }
                        }
                      }, _callee2);
                    })));
                  case 2:
                    if (!this.abortController.signal.aborted) {
                      _context3.next = 5;
                      break;
                    }
                    this.store.cleanupStory(this.story);
                    throw PREPARE_ABORTED;
                  case 5:
                  case "end":
                    return _context3.stop();
                }
              }
            }, _callee3, this);
          }));
          function prepare() {
            return _prepare.apply(this, arguments);
          }
          return prepare;
        }()
      }, {
        key: "isEqual",
        value: function isEqual(other) {
          return other && this.id === other.id && this.story && this.story === other.story;
        }
      }, {
        key: "isPreparing",
        value: function isPreparing() {
          return ["preparing"].includes(this.phase);
        }
      }, {
        key: "isPending",
        value: function isPending() {
          return ["rendering", "playing"].includes(this.phase);
        }
      }, {
        key: "context",
        value: function context() {
          return this.store.getStoryContext(this.story);
        }
      }, {
        key: "renderToElement",
        value: function() {
          var _renderToElement = _asyncToGenerator(import_regenerator.default.mark(function _callee4(canvasElement) {
            return import_regenerator.default.wrap(function _callee4$(_context4) {
              while (1) {
                switch (_context4.prev = _context4.next) {
                  case 0:
                    this.canvasElement = canvasElement;
                    return _context4.abrupt("return", this.render({
                      initial: true,
                      forceRemount: true
                    }));
                  case 2:
                  case "end":
                    return _context4.stop();
                }
              }
            }, _callee4, this);
          }));
          function renderToElement(_x4) {
            return _renderToElement.apply(this, arguments);
          }
          return renderToElement;
        }()
      }, {
        key: "render",
        value: function() {
          var _render = _asyncToGenerator(import_regenerator.default.mark(function _callee9() {
            var _this2 = this;
            var _ref2, _ref2$initial, initial, _ref2$forceRemount, forceRemount, _this$story, id, componentId, title, name, applyLoaders, unboundStoryFn, playFunction, abortSignal, loadedContext, renderStoryContext, _renderContext, _args9 = arguments;
            return import_regenerator.default.wrap(function _callee9$(_context9) {
              while (1) {
                switch (_context9.prev = _context9.next) {
                  case 0:
                    _ref2 = _args9.length > 0 && _args9[0] !== void 0 ? _args9[0] : {}, _ref2$initial = _ref2.initial, initial = _ref2$initial === void 0 ? false : _ref2$initial, _ref2$forceRemount = _ref2.forceRemount, forceRemount = _ref2$forceRemount === void 0 ? false : _ref2$forceRemount;
                    if (this.story) {
                      _context9.next = 3;
                      break;
                    }
                    throw new Error("cannot render when not prepared");
                  case 3:
                    _this$story = this.story, id = _this$story.id, componentId = _this$story.componentId, title = _this$story.title, name = _this$story.name, applyLoaders = _this$story.applyLoaders, unboundStoryFn = _this$story.unboundStoryFn, playFunction = _this$story.playFunction;
                    if (forceRemount && !initial) {
                      this.cancelRender();
                      this.abortController = createController();
                    }
                    abortSignal = this.abortController.signal;
                    _context9.prev = 6;
                    _context9.next = 9;
                    return this.runPhase(abortSignal, "loading", _asyncToGenerator(import_regenerator.default.mark(function _callee5() {
                      return import_regenerator.default.wrap(function _callee5$(_context5) {
                        while (1) {
                          switch (_context5.prev = _context5.next) {
                            case 0:
                              _context5.next = 2;
                              return applyLoaders(Object.assign({}, _this2.context(), {
                                viewMode: _this2.viewMode
                              }));
                            case 2:
                              loadedContext = _context5.sent;
                            case 3:
                            case "end":
                              return _context5.stop();
                          }
                        }
                      }, _callee5);
                    })));
                  case 9:
                    if (!abortSignal.aborted) {
                      _context9.next = 11;
                      break;
                    }
                    return _context9.abrupt("return");
                  case 11:
                    renderStoryContext = Object.assign({}, loadedContext, this.context(), {
                      abortSignal,
                      canvasElement: this.canvasElement
                    });
                    _renderContext = Object.assign({
                      componentId,
                      title,
                      kind: title,
                      id,
                      name,
                      story: name
                    }, this.callbacks, {
                      forceRemount: forceRemount || this.notYetRendered,
                      storyContext: renderStoryContext,
                      storyFn: function storyFn() {
                        return unboundStoryFn(renderStoryContext);
                      },
                      unboundStoryFn
                    });
                    _context9.next = 15;
                    return this.runPhase(abortSignal, "rendering", _asyncToGenerator(import_regenerator.default.mark(function _callee6() {
                      return import_regenerator.default.wrap(function _callee6$(_context6) {
                        while (1) {
                          switch (_context6.prev = _context6.next) {
                            case 0:
                              return _context6.abrupt("return", _this2.renderToScreen(_renderContext, _this2.canvasElement));
                            case 1:
                            case "end":
                              return _context6.stop();
                          }
                        }
                      }, _callee6);
                    })));
                  case 15:
                    this.notYetRendered = false;
                    if (!abortSignal.aborted) {
                      _context9.next = 18;
                      break;
                    }
                    return _context9.abrupt("return");
                  case 18:
                    if (!(forceRemount && playFunction)) {
                      _context9.next = 27;
                      break;
                    }
                    this.disableKeyListeners = true;
                    _context9.next = 22;
                    return this.runPhase(abortSignal, "playing", _asyncToGenerator(import_regenerator.default.mark(function _callee7() {
                      return import_regenerator.default.wrap(function _callee7$(_context7) {
                        while (1) {
                          switch (_context7.prev = _context7.next) {
                            case 0:
                              return _context7.abrupt("return", playFunction(_renderContext.storyContext));
                            case 1:
                            case "end":
                              return _context7.stop();
                          }
                        }
                      }, _callee7);
                    })));
                  case 22:
                    _context9.next = 24;
                    return this.runPhase(abortSignal, "played");
                  case 24:
                    this.disableKeyListeners = false;
                    if (!abortSignal.aborted) {
                      _context9.next = 27;
                      break;
                    }
                    return _context9.abrupt("return");
                  case 27:
                    _context9.next = 29;
                    return this.runPhase(abortSignal, "completed", _asyncToGenerator(import_regenerator.default.mark(function _callee8() {
                      return import_regenerator.default.wrap(function _callee8$(_context8) {
                        while (1) {
                          switch (_context8.prev = _context8.next) {
                            case 0:
                              return _context8.abrupt("return", _this2.channel.emit(STORY_RENDERED, id));
                            case 1:
                            case "end":
                              return _context8.stop();
                          }
                        }
                      }, _callee8);
                    })));
                  case 29:
                    _context9.next = 34;
                    break;
                  case 31:
                    _context9.prev = 31;
                    _context9.t0 = _context9["catch"](6);
                    this.callbacks.showException(_context9.t0);
                  case 34:
                  case "end":
                    return _context9.stop();
                }
              }
            }, _callee9, this, [[6, 31]]);
          }));
          function render() {
            return _render.apply(this, arguments);
          }
          return render;
        }()
      }, {
        key: "rerender",
        value: function() {
          var _rerender = _asyncToGenerator(import_regenerator.default.mark(function _callee10() {
            return import_regenerator.default.wrap(function _callee10$(_context10) {
              while (1) {
                switch (_context10.prev = _context10.next) {
                  case 0:
                    return _context10.abrupt("return", this.render());
                  case 1:
                  case "end":
                    return _context10.stop();
                }
              }
            }, _callee10, this);
          }));
          function rerender() {
            return _rerender.apply(this, arguments);
          }
          return rerender;
        }()
      }, {
        key: "remount",
        value: function() {
          var _remount = _asyncToGenerator(import_regenerator.default.mark(function _callee11() {
            return import_regenerator.default.wrap(function _callee11$(_context11) {
              while (1) {
                switch (_context11.prev = _context11.next) {
                  case 0:
                    return _context11.abrupt("return", this.render({
                      forceRemount: true
                    }));
                  case 1:
                  case "end":
                    return _context11.stop();
                }
              }
            }, _callee11, this);
          }));
          function remount() {
            return _remount.apply(this, arguments);
          }
          return remount;
        }()
      }, {
        key: "cancelRender",
        value: function cancelRender() {
          this.abortController.abort();
        }
      }, {
        key: "teardown",
        value: function() {
          var _teardown = _asyncToGenerator(import_regenerator.default.mark(function _callee12() {
            var options, i, _args12 = arguments;
            return import_regenerator.default.wrap(function _callee12$(_context12) {
              while (1) {
                switch (_context12.prev = _context12.next) {
                  case 0:
                    options = _args12.length > 0 && _args12[0] !== void 0 ? _args12[0] : {};
                    this.cancelRender();
                    if (this.story)
                      this.store.cleanupStory(this.story);
                    i = 0;
                  case 4:
                    if (!(i < 3)) {
                      _context12.next = 12;
                      break;
                    }
                    if (this.isPending()) {
                      _context12.next = 7;
                      break;
                    }
                    return _context12.abrupt("return");
                  case 7:
                    _context12.next = 9;
                    return new Promise(function(resolve) {
                      return setTimeout(resolve, 0);
                    });
                  case 9:
                    i += 1;
                    _context12.next = 4;
                    break;
                  case 12:
                    import_global.default.window.location.reload();
                    _context12.next = 15;
                    return new Promise(function() {
                    });
                  case 15:
                  case "end":
                    return _context12.stop();
                }
              }
            }, _callee12, this);
          }));
          function teardown() {
            return _teardown.apply(this, arguments);
          }
          return teardown;
        }()
      }]);
      return StoryRender2;
    }();
    StoryRender.displayName = "StoryRender";
  }
});

// node_modules/@storybook/preview-web/dist/esm/Preview.js
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray(o, minLen);
}
function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray(arr);
}
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }
  return arr2;
}
function asyncGeneratorStep2(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }
  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}
function _asyncToGenerator2(fn) {
  return function() {
    var self = this, args = arguments;
    return new Promise(function(resolve, reject) {
      var gen = fn.apply(self, args);
      function _next(value) {
        asyncGeneratorStep2(gen, resolve, reject, _next, _throw, "next", value);
      }
      function _throw(err) {
        asyncGeneratorStep2(gen, resolve, reject, _next, _throw, "throw", err);
      }
      _next(void 0);
    });
  };
}
function _taggedTemplateLiteral(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, {
    raw: {
      value: Object.freeze(raw)
    }
  }));
}
function _classCallCheck2(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties2(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass2(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties2(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties2(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
var import_regenerator2, import_es_regexp_exec, import_runtime2, import_es_object_to_string2, import_es_array_iterator, import_es_string_iterator, import_global2, import_synchronous_promise, _templateObject, _templateObject2, fetch, STORY_INDEX_PATH, Preview;
var init_Preview = __esm({
  "node_modules/@storybook/preview-web/dist/esm/Preview.js"() {
    init_define_ngDevMode();
    import_regenerator2 = __toESM(require_regenerator());
    init_es_array_slice();
    init_es_object_freeze();
    init_es_symbol();
    init_es_symbol_description();
    init_es_symbol_iterator();
    init_es_array_from();
    init_es_function_name();
    import_es_regexp_exec = __toESM(require_es_regexp_exec());
    import_runtime2 = __toESM(require_runtime());
    import_es_object_to_string2 = __toESM(require_es_object_to_string());
    init_es_promise();
    import_es_array_iterator = __toESM(require_es_array_iterator());
    import_es_string_iterator = __toESM(require_es_string_iterator());
    init_web_dom_collections_iterator();
    init_es_array_map();
    init_es_array_filter();
    init_es_array_find();
    init_es_set();
    init_es_array_concat();
    init_es_object_keys();
    init_esm2();
    import_global2 = __toESM(require_window());
    import_synchronous_promise = __toESM(require_synchronous_promise());
    init_esm3();
    init_esm();
    init_public_api();
    init_esm4();
    init_StoryRender();
    fetch = import_global2.default.fetch;
    STORY_INDEX_PATH = "./stories.json";
    Preview = function() {
      function Preview2() {
        var _global$FEATURES;
        _classCallCheck2(this, Preview2);
        this.channel = void 0;
        this.serverChannel = void 0;
        this.storyStore = void 0;
        this.getStoryIndex = void 0;
        this.importFn = void 0;
        this.renderToDOM = void 0;
        this.storyRenders = [];
        this.previewEntryError = void 0;
        this.channel = addons.getChannel();
        if ((_global$FEATURES = import_global2.default.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.storyStoreV7 && addons.hasServerChannel()) {
          this.serverChannel = addons.getServerChannel();
        }
        this.storyStore = new StoryStore();
      }
      _createClass2(Preview2, [{
        key: "initialize",
        value: function initialize(_ref) {
          var _this = this;
          var getStoryIndex = _ref.getStoryIndex, importFn = _ref.importFn, getProjectAnnotations = _ref.getProjectAnnotations;
          this.getStoryIndex = getStoryIndex;
          this.importFn = importFn;
          this.setupListeners();
          return this.getProjectAnnotationsOrRenderError(getProjectAnnotations).then(function(projectAnnotations) {
            return _this.initializeWithProjectAnnotations(projectAnnotations);
          });
        }
      }, {
        key: "setupListeners",
        value: function setupListeners() {
          var _this$serverChannel;
          (_this$serverChannel = this.serverChannel) === null || _this$serverChannel === void 0 ? void 0 : _this$serverChannel.on(STORY_INDEX_INVALIDATED, this.onStoryIndexChanged.bind(this));
          this.channel.on(UPDATE_GLOBALS, this.onUpdateGlobals.bind(this));
          this.channel.on(UPDATE_STORY_ARGS, this.onUpdateArgs.bind(this));
          this.channel.on(RESET_STORY_ARGS, this.onResetArgs.bind(this));
          this.channel.on(FORCE_RE_RENDER, this.onForceReRender.bind(this));
          this.channel.on(FORCE_REMOUNT, this.onForceRemount.bind(this));
        }
      }, {
        key: "getProjectAnnotationsOrRenderError",
        value: function getProjectAnnotationsOrRenderError(getProjectAnnotations) {
          var _this2 = this;
          return import_synchronous_promise.SynchronousPromise.resolve().then(getProjectAnnotations).then(function(projectAnnotations) {
            _this2.renderToDOM = projectAnnotations.renderToDOM;
            if (!_this2.renderToDOM) {
              throw new Error(esm_default(_templateObject || (_templateObject = _taggedTemplateLiteral(["\n            Expected your framework's preset to export a `renderToDOM` field.\n\n            Perhaps it needs to be upgraded for Storybook 6.4?\n\n            More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#mainjs-framework-field          \n          "], ["\n            Expected your framework's preset to export a \\`renderToDOM\\` field.\n\n            Perhaps it needs to be upgraded for Storybook 6.4?\n\n            More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#mainjs-framework-field          \n          "]))));
            }
            return projectAnnotations;
          }).catch(function(err) {
            _this2.renderPreviewEntryError("Error reading preview.js:", err);
            throw err;
          });
        }
      }, {
        key: "initializeWithProjectAnnotations",
        value: function initializeWithProjectAnnotations(projectAnnotations) {
          var _global$FEATURES2, _this3 = this;
          this.storyStore.setProjectAnnotations(projectAnnotations);
          this.setInitialGlobals();
          var storyIndexPromise;
          if ((_global$FEATURES2 = import_global2.default.FEATURES) !== null && _global$FEATURES2 !== void 0 && _global$FEATURES2.storyStoreV7) {
            storyIndexPromise = this.getStoryIndexFromServer();
          } else {
            if (!this.getStoryIndex) {
              throw new Error("No `getStoryIndex` passed defined in v6 mode");
            }
            storyIndexPromise = import_synchronous_promise.SynchronousPromise.resolve().then(this.getStoryIndex);
          }
          return storyIndexPromise.then(function(storyIndex) {
            return _this3.initializeWithStoryIndex(storyIndex);
          }).catch(function(err) {
            _this3.renderPreviewEntryError("Error loading story index:", err);
            throw err;
          });
        }
      }, {
        key: "setInitialGlobals",
        value: function() {
          var _setInitialGlobals = _asyncToGenerator2(import_regenerator2.default.mark(function _callee() {
            return import_regenerator2.default.wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    this.emitGlobals();
                  case 1:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, this);
          }));
          function setInitialGlobals() {
            return _setInitialGlobals.apply(this, arguments);
          }
          return setInitialGlobals;
        }()
      }, {
        key: "emitGlobals",
        value: function emitGlobals() {
          this.channel.emit(SET_GLOBALS, {
            globals: this.storyStore.globals.get() || {},
            globalTypes: this.storyStore.projectAnnotations.globalTypes || {}
          });
        }
      }, {
        key: "getStoryIndexFromServer",
        value: function() {
          var _getStoryIndexFromServer = _asyncToGenerator2(import_regenerator2.default.mark(function _callee2() {
            var result;
            return import_regenerator2.default.wrap(function _callee2$(_context2) {
              while (1) {
                switch (_context2.prev = _context2.next) {
                  case 0:
                    _context2.next = 2;
                    return fetch(STORY_INDEX_PATH);
                  case 2:
                    result = _context2.sent;
                    if (!(result.status === 200)) {
                      _context2.next = 5;
                      break;
                    }
                    return _context2.abrupt("return", result.json());
                  case 5:
                    _context2.t0 = Error;
                    _context2.next = 8;
                    return result.text();
                  case 8:
                    _context2.t1 = _context2.sent;
                    throw new _context2.t0(_context2.t1);
                  case 10:
                  case "end":
                    return _context2.stop();
                }
              }
            }, _callee2);
          }));
          function getStoryIndexFromServer() {
            return _getStoryIndexFromServer.apply(this, arguments);
          }
          return getStoryIndexFromServer;
        }()
      }, {
        key: "initializeWithStoryIndex",
        value: function initializeWithStoryIndex(storyIndex) {
          var _global$FEATURES3;
          return this.storyStore.initialize({
            storyIndex,
            importFn: this.importFn,
            cache: !((_global$FEATURES3 = import_global2.default.FEATURES) !== null && _global$FEATURES3 !== void 0 && _global$FEATURES3.storyStoreV7)
          });
        }
      }, {
        key: "onGetProjectAnnotationsChanged",
        value: function() {
          var _onGetProjectAnnotationsChanged = _asyncToGenerator2(import_regenerator2.default.mark(function _callee3(_ref2) {
            var getProjectAnnotations, projectAnnotations;
            return import_regenerator2.default.wrap(function _callee3$(_context3) {
              while (1) {
                switch (_context3.prev = _context3.next) {
                  case 0:
                    getProjectAnnotations = _ref2.getProjectAnnotations;
                    delete this.previewEntryError;
                    _context3.next = 4;
                    return this.getProjectAnnotationsOrRenderError(getProjectAnnotations);
                  case 4:
                    projectAnnotations = _context3.sent;
                    if (this.storyStore.projectAnnotations) {
                      _context3.next = 9;
                      break;
                    }
                    _context3.next = 8;
                    return this.initializeWithProjectAnnotations(projectAnnotations);
                  case 8:
                    return _context3.abrupt("return");
                  case 9:
                    _context3.next = 11;
                    return this.storyStore.setProjectAnnotations(projectAnnotations);
                  case 11:
                    this.emitGlobals();
                  case 12:
                  case "end":
                    return _context3.stop();
                }
              }
            }, _callee3, this);
          }));
          function onGetProjectAnnotationsChanged(_x) {
            return _onGetProjectAnnotationsChanged.apply(this, arguments);
          }
          return onGetProjectAnnotationsChanged;
        }()
      }, {
        key: "onStoryIndexChanged",
        value: function() {
          var _onStoryIndexChanged = _asyncToGenerator2(import_regenerator2.default.mark(function _callee4() {
            var storyIndex;
            return import_regenerator2.default.wrap(function _callee4$(_context4) {
              while (1) {
                switch (_context4.prev = _context4.next) {
                  case 0:
                    delete this.previewEntryError;
                    if (this.storyStore.projectAnnotations) {
                      _context4.next = 3;
                      break;
                    }
                    return _context4.abrupt("return");
                  case 3:
                    _context4.prev = 3;
                    _context4.next = 6;
                    return this.getStoryIndexFromServer();
                  case 6:
                    storyIndex = _context4.sent;
                    if (this.storyStore.storyIndex) {
                      _context4.next = 10;
                      break;
                    }
                    _context4.next = 10;
                    return this.initializeWithStoryIndex(storyIndex);
                  case 10:
                    _context4.next = 12;
                    return this.onStoriesChanged({
                      storyIndex
                    });
                  case 12:
                    _context4.next = 18;
                    break;
                  case 14:
                    _context4.prev = 14;
                    _context4.t0 = _context4["catch"](3);
                    this.renderPreviewEntryError("Error loading story index:", _context4.t0);
                    throw _context4.t0;
                  case 18:
                  case "end":
                    return _context4.stop();
                }
              }
            }, _callee4, this, [[3, 14]]);
          }));
          function onStoryIndexChanged() {
            return _onStoryIndexChanged.apply(this, arguments);
          }
          return onStoryIndexChanged;
        }()
      }, {
        key: "onStoriesChanged",
        value: function() {
          var _onStoriesChanged = _asyncToGenerator2(import_regenerator2.default.mark(function _callee5(_ref3) {
            var importFn, storyIndex;
            return import_regenerator2.default.wrap(function _callee5$(_context5) {
              while (1) {
                switch (_context5.prev = _context5.next) {
                  case 0:
                    importFn = _ref3.importFn, storyIndex = _ref3.storyIndex;
                    _context5.next = 3;
                    return this.storyStore.onStoriesChanged({
                      importFn,
                      storyIndex
                    });
                  case 3:
                  case "end":
                    return _context5.stop();
                }
              }
            }, _callee5, this);
          }));
          function onStoriesChanged(_x2) {
            return _onStoriesChanged.apply(this, arguments);
          }
          return onStoriesChanged;
        }()
      }, {
        key: "onUpdateGlobals",
        value: function() {
          var _onUpdateGlobals = _asyncToGenerator2(import_regenerator2.default.mark(function _callee6(_ref4) {
            var globals;
            return import_regenerator2.default.wrap(function _callee6$(_context6) {
              while (1) {
                switch (_context6.prev = _context6.next) {
                  case 0:
                    globals = _ref4.globals;
                    this.storyStore.globals.update(globals);
                    _context6.next = 4;
                    return Promise.all(this.storyRenders.map(function(r) {
                      return r.rerender();
                    }));
                  case 4:
                    this.channel.emit(GLOBALS_UPDATED, {
                      globals: this.storyStore.globals.get(),
                      initialGlobals: this.storyStore.globals.initialGlobals
                    });
                  case 5:
                  case "end":
                    return _context6.stop();
                }
              }
            }, _callee6, this);
          }));
          function onUpdateGlobals(_x3) {
            return _onUpdateGlobals.apply(this, arguments);
          }
          return onUpdateGlobals;
        }()
      }, {
        key: "onUpdateArgs",
        value: function() {
          var _onUpdateArgs = _asyncToGenerator2(import_regenerator2.default.mark(function _callee7(_ref5) {
            var storyId, updatedArgs;
            return import_regenerator2.default.wrap(function _callee7$(_context7) {
              while (1) {
                switch (_context7.prev = _context7.next) {
                  case 0:
                    storyId = _ref5.storyId, updatedArgs = _ref5.updatedArgs;
                    this.storyStore.args.update(storyId, updatedArgs);
                    _context7.next = 4;
                    return Promise.all(this.storyRenders.filter(function(r) {
                      return r.id === storyId;
                    }).map(function(r) {
                      return r.rerender();
                    }));
                  case 4:
                    this.channel.emit(STORY_ARGS_UPDATED, {
                      storyId,
                      args: this.storyStore.args.get(storyId)
                    });
                  case 5:
                  case "end":
                    return _context7.stop();
                }
              }
            }, _callee7, this);
          }));
          function onUpdateArgs(_x4) {
            return _onUpdateArgs.apply(this, arguments);
          }
          return onUpdateArgs;
        }()
      }, {
        key: "onResetArgs",
        value: function() {
          var _onResetArgs = _asyncToGenerator2(import_regenerator2.default.mark(function _callee8(_ref6) {
            var storyId, argNames, render, story, argNamesToReset, updatedArgs;
            return import_regenerator2.default.wrap(function _callee8$(_context8) {
              while (1) {
                switch (_context8.prev = _context8.next) {
                  case 0:
                    storyId = _ref6.storyId, argNames = _ref6.argNames;
                    render = this.storyRenders.find(function(r) {
                      return r.id === storyId;
                    });
                    _context8.t0 = render === null || render === void 0 ? void 0 : render.story;
                    if (_context8.t0) {
                      _context8.next = 7;
                      break;
                    }
                    _context8.next = 6;
                    return this.storyStore.loadStory({
                      storyId
                    });
                  case 6:
                    _context8.t0 = _context8.sent;
                  case 7:
                    story = _context8.t0;
                    argNamesToReset = argNames || _toConsumableArray(new Set([].concat(_toConsumableArray(Object.keys(story.initialArgs)), _toConsumableArray(Object.keys(this.storyStore.args.get(storyId))))));
                    updatedArgs = argNamesToReset.reduce(function(acc, argName) {
                      acc[argName] = story.initialArgs[argName];
                      return acc;
                    }, {});
                    _context8.next = 12;
                    return this.onUpdateArgs({
                      storyId,
                      updatedArgs
                    });
                  case 12:
                  case "end":
                    return _context8.stop();
                }
              }
            }, _callee8, this);
          }));
          function onResetArgs(_x5) {
            return _onResetArgs.apply(this, arguments);
          }
          return onResetArgs;
        }()
      }, {
        key: "onForceReRender",
        value: function() {
          var _onForceReRender = _asyncToGenerator2(import_regenerator2.default.mark(function _callee9() {
            return import_regenerator2.default.wrap(function _callee9$(_context9) {
              while (1) {
                switch (_context9.prev = _context9.next) {
                  case 0:
                    _context9.next = 2;
                    return Promise.all(this.storyRenders.map(function(r) {
                      return r.rerender();
                    }));
                  case 2:
                  case "end":
                    return _context9.stop();
                }
              }
            }, _callee9, this);
          }));
          function onForceReRender() {
            return _onForceReRender.apply(this, arguments);
          }
          return onForceReRender;
        }()
      }, {
        key: "onForceRemount",
        value: function() {
          var _onForceRemount = _asyncToGenerator2(import_regenerator2.default.mark(function _callee10(_ref7) {
            var storyId;
            return import_regenerator2.default.wrap(function _callee10$(_context10) {
              while (1) {
                switch (_context10.prev = _context10.next) {
                  case 0:
                    storyId = _ref7.storyId;
                    _context10.next = 3;
                    return Promise.all(this.storyRenders.filter(function(r) {
                      return r.id === storyId;
                    }).map(function(r) {
                      return r.remount();
                    }));
                  case 3:
                  case "end":
                    return _context10.stop();
                }
              }
            }, _callee10, this);
          }));
          function onForceRemount(_x6) {
            return _onForceRemount.apply(this, arguments);
          }
          return onForceRemount;
        }()
      }, {
        key: "renderStoryToElement",
        value: function renderStoryToElement(story, element) {
          var _this4 = this;
          var render = new StoryRender(this.channel, this.storyStore, this.renderToDOM, this.inlineStoryCallbacks(story.id), story.id, "docs", story);
          render.renderToElement(element);
          this.storyRenders.push(render);
          return _asyncToGenerator2(import_regenerator2.default.mark(function _callee11() {
            return import_regenerator2.default.wrap(function _callee11$(_context11) {
              while (1) {
                switch (_context11.prev = _context11.next) {
                  case 0:
                    _context11.next = 2;
                    return _this4.teardownRender(render);
                  case 2:
                  case "end":
                    return _context11.stop();
                }
              }
            }, _callee11);
          }));
        }
      }, {
        key: "teardownRender",
        value: function() {
          var _teardownRender = _asyncToGenerator2(import_regenerator2.default.mark(function _callee12(render) {
            var _ref9, viewModeChanged, _args12 = arguments;
            return import_regenerator2.default.wrap(function _callee12$(_context12) {
              while (1) {
                switch (_context12.prev = _context12.next) {
                  case 0:
                    _ref9 = _args12.length > 1 && _args12[1] !== void 0 ? _args12[1] : {}, viewModeChanged = _ref9.viewModeChanged;
                    this.storyRenders = this.storyRenders.filter(function(r) {
                      return r !== render;
                    });
                    _context12.next = 4;
                    return render === null || render === void 0 ? void 0 : render.teardown({
                      viewModeChanged
                    });
                  case 4:
                  case "end":
                    return _context12.stop();
                }
              }
            }, _callee12, this);
          }));
          function teardownRender(_x7) {
            return _teardownRender.apply(this, arguments);
          }
          return teardownRender;
        }()
      }, {
        key: "extract",
        value: function() {
          var _extract = _asyncToGenerator2(import_regenerator2.default.mark(function _callee13(options) {
            var _global$FEATURES4;
            return import_regenerator2.default.wrap(function _callee13$(_context13) {
              while (1) {
                switch (_context13.prev = _context13.next) {
                  case 0:
                    if (!this.previewEntryError) {
                      _context13.next = 2;
                      break;
                    }
                    throw this.previewEntryError;
                  case 2:
                    if (this.storyStore.projectAnnotations) {
                      _context13.next = 4;
                      break;
                    }
                    throw new Error(esm_default(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral(["Failed to initialize Storybook.\n      \n      Do you have an error in your `preview.js`? Check your Storybook's browser console for errors."], ["Failed to initialize Storybook.\n      \n      Do you have an error in your \\`preview.js\\`? Check your Storybook's browser console for errors."]))));
                  case 4:
                    if (!((_global$FEATURES4 = import_global2.default.FEATURES) !== null && _global$FEATURES4 !== void 0 && _global$FEATURES4.storyStoreV7)) {
                      _context13.next = 7;
                      break;
                    }
                    _context13.next = 7;
                    return this.storyStore.cacheAllCSFFiles();
                  case 7:
                    return _context13.abrupt("return", this.storyStore.extract(options));
                  case 8:
                  case "end":
                    return _context13.stop();
                }
              }
            }, _callee13, this);
          }));
          function extract(_x8) {
            return _extract.apply(this, arguments);
          }
          return extract;
        }()
      }, {
        key: "inlineStoryCallbacks",
        value: function inlineStoryCallbacks(storyId) {
          return {
            showMain: function showMain() {
            },
            showError: function showError(err) {
              return logger.error("Error rendering docs story (".concat(storyId, ")"), err);
            },
            showException: function showException(err) {
              return logger.error("Error rendering docs story (".concat(storyId, ")"), err);
            }
          };
        }
      }, {
        key: "renderPreviewEntryError",
        value: function renderPreviewEntryError(reason, err) {
          this.previewEntryError = err;
          logger.error(reason);
          logger.error(err);
          this.channel.emit(CONFIG_ERROR, err);
        }
      }]);
      return Preview2;
    }();
  }
});

// node_modules/@storybook/preview-web/dist/esm/parseArgsParam.js
function _taggedTemplateLiteral2(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, {
    raw: {
      value: Object.freeze(raw)
    }
  }));
}
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray2(arr, i) || _nonIterableRest();
}
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray2(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray2(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray2(o, minLen);
}
function _arrayLikeToArray2(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }
  return arr2;
}
function _iterableToArrayLimit(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];
  if (_i == null)
    return;
  var _arr = [];
  var _n = true;
  var _d = false;
  var _s, _e;
  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);
      if (i && _arr.length === i)
        break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null)
        _i["return"]();
    } finally {
      if (_d)
        throw _e;
    }
  }
  return _arr;
}
function _arrayWithHoles(arr) {
  if (Array.isArray(arr))
    return arr;
}
var import_es_array_iterator2, import_es_string_iterator2, import_es_regexp_exec2, import_es_object_to_string3, import_qs, import_isPlainObject, _templateObject3, VALIDATION_REGEXP, NUMBER_REGEXP, HEX_REGEXP, COLOR_REGEXP, validateArgs, QS_OPTIONS, parseArgsParam;
var init_parseArgsParam = __esm({
  "node_modules/@storybook/preview-web/dist/esm/parseArgsParam.js"() {
    init_define_ngDevMode();
    init_es_symbol();
    init_es_symbol_description();
    init_es_symbol_iterator();
    import_es_array_iterator2 = __toESM(require_es_array_iterator());
    import_es_string_iterator2 = __toESM(require_es_string_iterator());
    init_web_dom_collections_iterator();
    init_es_function_name();
    init_es_array_from();
    init_es_object_freeze();
    import_es_regexp_exec2 = __toESM(require_es_regexp_exec());
    import_es_object_to_string3 = __toESM(require_es_object_to_string());
    init_es_object_entries();
    init_es_regexp_to_string();
    init_es_string_starts_with();
    init_es_string_ends_with();
    init_es_array_slice();
    init_es_string_match();
    init_es_array_concat();
    init_es_number_constructor();
    init_es_array_map();
    init_es_string_split();
    init_es_string_replace();
    init_es_array_join();
    init_es_object_assign();
    import_qs = __toESM(require_lib());
    init_esm2();
    init_esm();
    import_isPlainObject = __toESM(require_isPlainObject());
    VALIDATION_REGEXP = /^[a-zA-Z0-9 _-]*$/;
    NUMBER_REGEXP = /^-?[0-9]+(\.[0-9]+)?$/;
    HEX_REGEXP = /^#([a-f0-9]{3,4}|[a-f0-9]{6}|[a-f0-9]{8})$/i;
    COLOR_REGEXP = /^(rgba?|hsla?)\(([0-9]{1,3}),\s?([0-9]{1,3})%?,\s?([0-9]{1,3})%?,?\s?([0-9](\.[0-9]{1,2})?)?\)$/i;
    validateArgs = function validateArgs2() {
      var key = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
      var value = arguments.length > 1 ? arguments[1] : void 0;
      if (key === null)
        return false;
      if (key === "" || !VALIDATION_REGEXP.test(key))
        return false;
      if (value === null || value === void 0)
        return true;
      if (value instanceof Date)
        return true;
      if (typeof value === "number" || typeof value === "boolean")
        return true;
      if (typeof value === "string") {
        return VALIDATION_REGEXP.test(value) || NUMBER_REGEXP.test(value) || HEX_REGEXP.test(value) || COLOR_REGEXP.test(value);
      }
      if (Array.isArray(value))
        return value.every(function(v) {
          return validateArgs2(key, v);
        });
      if ((0, import_isPlainObject.default)(value))
        return Object.entries(value).every(function(_ref) {
          var _ref2 = _slicedToArray(_ref, 2), k = _ref2[0], v = _ref2[1];
          return validateArgs2(k, v);
        });
      return false;
    };
    QS_OPTIONS = {
      delimiter: ";",
      allowDots: true,
      allowSparse: true,
      decoder: function(_decoder) {
        function decoder(_x, _x2, _x3, _x4) {
          return _decoder.apply(this, arguments);
        }
        decoder.toString = function() {
          return _decoder.toString();
        };
        return decoder;
      }(function(str, defaultDecoder, charset, type) {
        if (type === "value" && str.startsWith("!")) {
          if (str === "!undefined")
            return void 0;
          if (str === "!null")
            return null;
          if (str.startsWith("!date(") && str.endsWith(")"))
            return new Date(str.slice(6, -1));
          if (str.startsWith("!hex(") && str.endsWith(")"))
            return "#".concat(str.slice(5, -1));
          var color = str.slice(1).match(COLOR_REGEXP);
          if (color) {
            if (str.startsWith("!rgba"))
              return "".concat(color[1], "(").concat(color[2], ", ").concat(color[3], ", ").concat(color[4], ", ").concat(color[5], ")");
            if (str.startsWith("!hsla"))
              return "".concat(color[1], "(").concat(color[2], ", ").concat(color[3], "%, ").concat(color[4], "%, ").concat(color[5], ")");
            return str.startsWith("!rgb") ? "".concat(color[1], "(").concat(color[2], ", ").concat(color[3], ", ").concat(color[4], ")") : "".concat(color[1], "(").concat(color[2], ", ").concat(color[3], "%, ").concat(color[4], "%)");
          }
        }
        if (type === "value" && NUMBER_REGEXP.test(str))
          return Number(str);
        return defaultDecoder(str, defaultDecoder, charset);
      })
    };
    parseArgsParam = function parseArgsParam2(argsString) {
      var parts = argsString.split(";").map(function(part) {
        return part.replace("=", "~").replace(":", "=");
      });
      return Object.entries(import_qs.default.parse(parts.join(";"), QS_OPTIONS)).reduce(function(acc, _ref3) {
        var _ref4 = _slicedToArray(_ref3, 2), key = _ref4[0], value = _ref4[1];
        if (validateArgs(key, value))
          return Object.assign(acc, _defineProperty({}, key, value));
        once.warn(esm_default(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral2(["\n      Omitted potentially unsafe URL args.\n\n      More info: https://storybook.js.org/docs/react/writing-stories/args#setting-args-through-the-url\n    "]))));
        return acc;
      }, {});
    };
  }
});

// node_modules/@storybook/preview-web/dist/esm/UrlStore.js
function _classCallCheck3(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties3(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass3(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties3(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties3(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
function _typeof(obj) {
  "@babel/helpers - typeof";
  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj2) {
    return typeof obj2;
  } : function(obj2) {
    return obj2 && "function" == typeof Symbol && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
  }, _typeof(obj);
}
function _objectWithoutProperties(source, excluded) {
  if (source == null)
    return {};
  var target = _objectWithoutPropertiesLoose(source, excluded);
  var key, i;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0)
        continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key))
        continue;
      target[key] = source[key];
    }
  }
  return target;
}
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function pathToId(path) {
  var match = (path || "").match(/^\/story\/(.+)/);
  if (!match) {
    throw new Error("Invalid path '".concat(path, "',  must start with '/story/'"));
  }
  return match[1];
}
var import_es_object_to_string4, import_es_array_iterator3, import_es_string_iterator3, import_es_regexp_exec3, import_global3, import_qs2, import_util_deprecate, _excluded, history, document, getQueryString, setPath, isObject, getFirstString, deprecatedLegacyQuery, getSelectionSpecifierFromPath, UrlStore;
var init_UrlStore = __esm({
  "node_modules/@storybook/preview-web/dist/esm/UrlStore.js"() {
    init_define_ngDevMode();
    init_es_object_keys();
    init_es_symbol();
    init_es_symbol_description();
    import_es_object_to_string4 = __toESM(require_es_object_to_string());
    init_es_symbol_iterator();
    import_es_array_iterator3 = __toESM(require_es_array_iterator());
    import_es_string_iterator3 = __toESM(require_es_string_iterator());
    init_web_dom_collections_iterator();
    import_es_regexp_exec3 = __toESM(require_es_regexp_exec());
    init_es_string_match();
    init_es_string_search();
    init_es_object_assign();
    init_es_array_concat();
    init_es_object_values();
    import_global3 = __toESM(require_window());
    import_qs2 = __toESM(require_lib());
    import_util_deprecate = __toESM(require_browser());
    init_parseArgsParam();
    _excluded = ["path", "selectedKind", "selectedStory"];
    history = import_global3.default.history;
    document = import_global3.default.document;
    getQueryString = function getQueryString2(_ref) {
      var selection = _ref.selection, extraParams = _ref.extraParams;
      var _document$location$se = document.location.search, search = _document$location$se === void 0 ? "" : _document$location$se;
      var _qs$parse = import_qs2.default.parse(search, {
        ignoreQueryPrefix: true
      }), path = _qs$parse.path, selectedKind = _qs$parse.selectedKind, selectedStory = _qs$parse.selectedStory, rest = _objectWithoutProperties(_qs$parse, _excluded);
      return import_qs2.default.stringify(Object.assign({}, rest, extraParams, selection && {
        id: selection.storyId,
        viewMode: selection.viewMode
      }), {
        encode: false,
        addQueryPrefix: true
      });
    };
    setPath = function setPath2(selection) {
      if (!selection)
        return;
      var query = getQueryString({
        selection
      });
      var _document$location$ha = document.location.hash, hash = _document$location$ha === void 0 ? "" : _document$location$ha;
      document.title = selection.storyId;
      history.replaceState({}, "", "".concat(document.location.pathname).concat(query).concat(hash));
    };
    isObject = function isObject2(val) {
      return val != null && _typeof(val) === "object" && Array.isArray(val) === false;
    };
    getFirstString = function getFirstString2(v) {
      if (typeof v === "string") {
        return v;
      }
      if (Array.isArray(v)) {
        return getFirstString2(v[0]);
      }
      if (isObject(v)) {
        return getFirstString2(Object.values(v));
      }
      return void 0;
    };
    deprecatedLegacyQuery = (0, import_util_deprecate.default)(function() {
      return 0;
    }, "URL formats with `selectedKind` and `selectedName` query parameters are deprecated.\nUse `id=$storyId` instead.\nSee https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#new-url-structure");
    getSelectionSpecifierFromPath = function getSelectionSpecifierFromPath2() {
      var query = import_qs2.default.parse(document.location.search, {
        ignoreQueryPrefix: true
      });
      var args = typeof query.args === "string" ? parseArgsParam(query.args) : void 0;
      var globals = typeof query.globals === "string" ? parseArgsParam(query.globals) : void 0;
      var viewMode = getFirstString(query.viewMode);
      if (typeof viewMode !== "string" || !viewMode.match(/docs|story/)) {
        viewMode = "story";
      }
      var path = getFirstString(query.path);
      var storyId = path ? pathToId(path) : getFirstString(query.id);
      if (storyId) {
        return {
          storySpecifier: storyId,
          args,
          globals,
          viewMode
        };
      }
      var title = getFirstString(query.selectedKind);
      var name = getFirstString(query.selectedStory);
      if (title && name) {
        deprecatedLegacyQuery();
        return {
          storySpecifier: {
            title,
            name
          },
          args,
          globals,
          viewMode
        };
      }
      return null;
    };
    UrlStore = function() {
      function UrlStore2() {
        _classCallCheck3(this, UrlStore2);
        this.selectionSpecifier = void 0;
        this.selection = void 0;
        this.selectionSpecifier = getSelectionSpecifierFromPath();
      }
      _createClass3(UrlStore2, [{
        key: "setSelection",
        value: function setSelection(selection) {
          this.selection = selection;
          setPath(this.selection);
        }
      }, {
        key: "setQueryParams",
        value: function setQueryParams(queryParams) {
          var query = getQueryString({
            extraParams: queryParams
          });
          var _document$location$ha2 = document.location.hash, hash = _document$location$ha2 === void 0 ? "" : _document$location$ha2;
          history.replaceState({}, "", "".concat(document.location.pathname).concat(query).concat(hash));
        }
      }]);
      return UrlStore2;
    }();
  }
});

// node_modules/@storybook/preview-web/dist/esm/WebView.js
function _slicedToArray2(arr, i) {
  return _arrayWithHoles2(arr) || _iterableToArrayLimit2(arr, i) || _unsupportedIterableToArray3(arr, i) || _nonIterableRest2();
}
function _nonIterableRest2() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray3(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray3(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray3(o, minLen);
}
function _arrayLikeToArray3(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }
  return arr2;
}
function _iterableToArrayLimit2(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];
  if (_i == null)
    return;
  var _arr = [];
  var _n = true;
  var _d = false;
  var _s, _e;
  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);
      if (i && _arr.length === i)
        break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null)
        _i["return"]();
    } finally {
      if (_d)
        throw _e;
    }
  }
  return _arr;
}
function _arrayWithHoles2(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral3(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, {
    raw: {
      value: Object.freeze(raw)
    }
  }));
}
function _classCallCheck4(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties4(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass4(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties4(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties4(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
var import_es_array_iterator4, import_es_string_iterator4, import_es_regexp_exec4, import_es_object_to_string5, import_global4, import_ansi_to_html, import_qs3, _templateObject4, document2, PREPARING_DELAY, layoutClassMap, Mode, classes, ansiConverter, WebView;
var init_WebView = __esm({
  "node_modules/@storybook/preview-web/dist/esm/WebView.js"() {
    init_define_ngDevMode();
    init_es_object_freeze();
    init_es_symbol();
    init_es_symbol_description();
    init_es_symbol_iterator();
    import_es_array_iterator4 = __toESM(require_es_array_iterator());
    import_es_string_iterator4 = __toESM(require_es_string_iterator());
    init_web_dom_collections_iterator();
    init_es_function_name();
    init_es_array_from();
    import_es_regexp_exec4 = __toESM(require_es_regexp_exec());
    init_es_string_search();
    init_es_array_join();
    init_es_object_keys();
    import_es_object_to_string5 = __toESM(require_es_object_to_string());
    init_web_dom_collections_for_each();
    init_es_string_split();
    init_es_array_slice();
    import_global4 = __toESM(require_window());
    init_esm();
    import_ansi_to_html = __toESM(require_ansi_to_html());
    init_esm2();
    import_qs3 = __toESM(require_lib());
    document2 = import_global4.default.document;
    PREPARING_DELAY = 100;
    layoutClassMap = {
      centered: "sb-main-centered",
      fullscreen: "sb-main-fullscreen",
      padded: "sb-main-padded"
    };
    (function(Mode2) {
      Mode2["MAIN"] = "MAIN";
      Mode2["NOPREVIEW"] = "NOPREVIEW";
      Mode2["PREPARING_STORY"] = "PREPARING_STORY";
      Mode2["PREPARING_DOCS"] = "PREPARING_DOCS";
      Mode2["ERROR"] = "ERROR";
    })(Mode || (Mode = {}));
    classes = {
      PREPARING_STORY: "sb-show-preparing-story",
      PREPARING_DOCS: "sb-show-preparing-docs",
      MAIN: "sb-show-main",
      NOPREVIEW: "sb-show-nopreview",
      ERROR: "sb-show-errordisplay"
    };
    ansiConverter = new import_ansi_to_html.default({
      escapeXML: true
    });
    WebView = function() {
      function WebView2() {
        _classCallCheck4(this, WebView2);
        this.currentLayoutClass = void 0;
        this.testing = false;
        this.preparingTimeout = null;
        var _qs$parse = import_qs3.default.parse(document2.location.search, {
          ignoreQueryPrefix: true
        }), __SPECIAL_TEST_PARAMETER__ = _qs$parse.__SPECIAL_TEST_PARAMETER__;
        switch (__SPECIAL_TEST_PARAMETER__) {
          case "preparing-story": {
            this.showPreparingStory();
            this.testing = true;
            break;
          }
          case "preparing-docs": {
            this.showPreparingDocs();
            this.testing = true;
            break;
          }
          default:
        }
      }
      _createClass4(WebView2, [{
        key: "prepareForStory",
        value: function prepareForStory(story) {
          this.showStory();
          this.applyLayout(story.parameters.layout);
          document2.documentElement.scrollTop = 0;
          document2.documentElement.scrollLeft = 0;
          return this.storyRoot();
        }
      }, {
        key: "storyRoot",
        value: function storyRoot() {
          return document2.getElementById("root");
        }
      }, {
        key: "prepareForDocs",
        value: function prepareForDocs() {
          this.showMain();
          this.showDocs();
          this.applyLayout("fullscreen");
          return this.docsRoot();
        }
      }, {
        key: "docsRoot",
        value: function docsRoot() {
          return document2.getElementById("docs-root");
        }
      }, {
        key: "applyLayout",
        value: function applyLayout() {
          var layout = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "padded";
          if (layout === "none") {
            document2.body.classList.remove(this.currentLayoutClass);
            this.currentLayoutClass = null;
            return;
          }
          this.checkIfLayoutExists(layout);
          var layoutClass = layoutClassMap[layout];
          document2.body.classList.remove(this.currentLayoutClass);
          document2.body.classList.add(layoutClass);
          this.currentLayoutClass = layoutClass;
        }
      }, {
        key: "checkIfLayoutExists",
        value: function checkIfLayoutExists(layout) {
          if (!layoutClassMap[layout]) {
            logger.warn(esm_default(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral3(["The desired layout: ", " is not a valid option.\n         The possible options are: ", ", none."])), layout, Object.keys(layoutClassMap).join(", ")));
          }
        }
      }, {
        key: "showMode",
        value: function showMode(mode) {
          clearTimeout(this.preparingTimeout);
          Object.keys(Mode).forEach(function(otherMode) {
            if (otherMode === mode) {
              document2.body.classList.add(classes[otherMode]);
            } else {
              document2.body.classList.remove(classes[otherMode]);
            }
          });
        }
      }, {
        key: "showErrorDisplay",
        value: function showErrorDisplay(_ref) {
          var _ref$message = _ref.message, message = _ref$message === void 0 ? "" : _ref$message, _ref$stack = _ref.stack, stack = _ref$stack === void 0 ? "" : _ref$stack;
          var header = message;
          var detail = stack;
          var parts = message.split("\n");
          if (parts.length > 1) {
            var _parts = _slicedToArray2(parts, 1);
            header = _parts[0];
            detail = parts.slice(1).join("\n");
          }
          document2.getElementById("error-message").innerHTML = ansiConverter.toHtml(header);
          document2.getElementById("error-stack").innerHTML = ansiConverter.toHtml(detail);
          this.showMode(Mode.ERROR);
        }
      }, {
        key: "showNoPreview",
        value: function showNoPreview() {
          var _this$storyRoot, _this$docsRoot;
          if (this.testing)
            return;
          this.showMode(Mode.NOPREVIEW);
          (_this$storyRoot = this.storyRoot()) === null || _this$storyRoot === void 0 ? void 0 : _this$storyRoot.setAttribute("hidden", "true");
          (_this$docsRoot = this.docsRoot()) === null || _this$docsRoot === void 0 ? void 0 : _this$docsRoot.setAttribute("hidden", "true");
        }
      }, {
        key: "showPreparingStory",
        value: function showPreparingStory() {
          var _this = this;
          var _ref2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, _ref2$immediate = _ref2.immediate, immediate = _ref2$immediate === void 0 ? false : _ref2$immediate;
          clearTimeout(this.preparingTimeout);
          if (immediate) {
            this.showMode(Mode.PREPARING_STORY);
          } else {
            this.preparingTimeout = setTimeout(function() {
              return _this.showMode(Mode.PREPARING_STORY);
            }, PREPARING_DELAY);
          }
        }
      }, {
        key: "showPreparingDocs",
        value: function showPreparingDocs() {
          var _this2 = this;
          clearTimeout(this.preparingTimeout);
          this.preparingTimeout = setTimeout(function() {
            return _this2.showMode(Mode.PREPARING_DOCS);
          }, PREPARING_DELAY);
        }
      }, {
        key: "showMain",
        value: function showMain() {
          this.showMode(Mode.MAIN);
        }
      }, {
        key: "showDocs",
        value: function showDocs() {
          this.storyRoot().setAttribute("hidden", "true");
          this.docsRoot().removeAttribute("hidden");
        }
      }, {
        key: "showStory",
        value: function showStory() {
          this.docsRoot().setAttribute("hidden", "true");
          this.storyRoot().removeAttribute("hidden");
        }
      }, {
        key: "showStoryDuringRender",
        value: function showStoryDuringRender() {
          document2.body.classList.add(classes.MAIN);
        }
      }]);
      return WebView2;
    }();
  }
});

// node_modules/@storybook/preview-web/dist/esm/DocsRender.js
function asyncGeneratorStep3(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }
  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}
function _asyncToGenerator3(fn) {
  return function() {
    var self = this, args = arguments;
    return new Promise(function(resolve, reject) {
      var gen = fn.apply(self, args);
      function _next(value) {
        asyncGeneratorStep3(gen, resolve, reject, _next, _throw, "next", value);
      }
      function _throw(err) {
        asyncGeneratorStep3(gen, resolve, reject, _next, _throw, "throw", err);
      }
      _next(void 0);
    });
  };
}
function _classCallCheck5(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties5(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass5(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties5(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties5(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
var import_regenerator3, import_runtime3, import_es_object_to_string6, import_global5, DocsRender;
var init_DocsRender = __esm({
  "node_modules/@storybook/preview-web/dist/esm/DocsRender.js"() {
    init_define_ngDevMode();
    import_regenerator3 = __toESM(require_regenerator());
    import_runtime3 = __toESM(require_runtime());
    init_es_function_name();
    init_es_object_assign();
    import_es_object_to_string6 = __toESM(require_es_object_to_string());
    init_es_promise();
    import_global5 = __toESM(require_window());
    init_esm3();
    DocsRender = function() {
      function DocsRender2(channel, store, id, story) {
        _classCallCheck5(this, DocsRender2);
        this.channel = channel;
        this.store = store;
        this.id = id;
        this.story = story;
        this.canvasElement = void 0;
        this.context = void 0;
        this.disableKeyListeners = false;
      }
      _createClass5(DocsRender2, [{
        key: "isPreparing",
        value: function isPreparing() {
          return false;
        }
      }, {
        key: "renderToElement",
        value: function() {
          var _renderToElement = _asyncToGenerator3(import_regenerator3.default.mark(function _callee(canvasElement, renderStoryToElement) {
            var _this = this, _global$FEATURES;
            var _this$story, id, title, name, csfFile;
            return import_regenerator3.default.wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    this.canvasElement = canvasElement;
                    _this$story = this.story, id = _this$story.id, title = _this$story.title, name = _this$story.name;
                    _context.next = 4;
                    return this.store.loadCSFFileByStoryId(this.id);
                  case 4:
                    csfFile = _context.sent;
                    this.context = Object.assign({
                      id,
                      title,
                      name,
                      storyById: function storyById(storyId) {
                        return _this.store.storyFromCSFFile({
                          storyId,
                          csfFile
                        });
                      },
                      componentStories: function componentStories() {
                        return _this.store.componentStoriesFromCSFFile({
                          csfFile
                        });
                      },
                      loadStory: function loadStory(storyId) {
                        return _this.store.loadStory({
                          storyId
                        });
                      },
                      renderStoryToElement,
                      getStoryContext: function getStoryContext(renderedStory) {
                        return Object.assign({}, _this.store.getStoryContext(renderedStory), {
                          viewMode: "docs"
                        });
                      }
                    }, !((_global$FEATURES = import_global5.default.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.breakingChangesV7) && this.store.getStoryContext(this.story));
                    return _context.abrupt("return", this.render());
                  case 7:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, this);
          }));
          function renderToElement(_x, _x2) {
            return _renderToElement.apply(this, arguments);
          }
          return renderToElement;
        }()
      }, {
        key: "render",
        value: function() {
          var _render = _asyncToGenerator3(import_regenerator3.default.mark(function _callee2() {
            var _this2 = this;
            var renderer;
            return import_regenerator3.default.wrap(function _callee2$(_context2) {
              while (1) {
                switch (_context2.prev = _context2.next) {
                  case 0:
                    if (!(!this.story || !this.context || !this.canvasElement)) {
                      _context2.next = 2;
                      break;
                    }
                    throw new Error("DocsRender not ready to render");
                  case 2:
                    _context2.next = 4;
                    return import("./renderDocs-P74RLDVM.js");
                  case 4:
                    renderer = _context2.sent;
                    renderer.renderDocs(this.story, this.context, this.canvasElement, function() {
                      return _this2.channel.emit(DOCS_RENDERED, _this2.id);
                    });
                  case 6:
                  case "end":
                    return _context2.stop();
                }
              }
            }, _callee2, this);
          }));
          function render() {
            return _render.apply(this, arguments);
          }
          return render;
        }()
      }, {
        key: "rerender",
        value: function() {
          var _rerender = _asyncToGenerator3(import_regenerator3.default.mark(function _callee3(isGlobals) {
            var _global$FEATURES2;
            return import_regenerator3.default.wrap(function _callee3$(_context3) {
              while (1) {
                switch (_context3.prev = _context3.next) {
                  case 0:
                    if (!(!((_global$FEATURES2 = import_global5.default.FEATURES) !== null && _global$FEATURES2 !== void 0 && _global$FEATURES2.modernInlineRender) || isGlobals)) {
                      _context3.next = 3;
                      break;
                    }
                    _context3.next = 3;
                    return this.render();
                  case 3:
                  case "end":
                    return _context3.stop();
                }
              }
            }, _callee3, this);
          }));
          function rerender(_x3) {
            return _rerender.apply(this, arguments);
          }
          return rerender;
        }()
      }, {
        key: "teardown",
        value: function() {
          var _teardown = _asyncToGenerator3(import_regenerator3.default.mark(function _callee4() {
            var _ref, viewModeChanged, renderer, _args4 = arguments;
            return import_regenerator3.default.wrap(function _callee4$(_context4) {
              while (1) {
                switch (_context4.prev = _context4.next) {
                  case 0:
                    _ref = _args4.length > 0 && _args4[0] !== void 0 ? _args4[0] : {}, viewModeChanged = _ref.viewModeChanged;
                    if (!(!viewModeChanged || !this.canvasElement)) {
                      _context4.next = 3;
                      break;
                    }
                    return _context4.abrupt("return");
                  case 3:
                    _context4.next = 5;
                    return import("./renderDocs-P74RLDVM.js");
                  case 5:
                    renderer = _context4.sent;
                    renderer.unmountDocs(this.canvasElement);
                  case 7:
                  case "end":
                    return _context4.stop();
                }
              }
            }, _callee4, this);
          }));
          function teardown() {
            return _teardown.apply(this, arguments);
          }
          return teardown;
        }()
      }], [{
        key: "fromStoryRender",
        value: function fromStoryRender(storyRender) {
          var channel = storyRender.channel, store = storyRender.store, id = storyRender.id, story = storyRender.story;
          return new DocsRender2(channel, store, id, story);
        }
      }]);
      return DocsRender2;
    }();
    DocsRender.displayName = "DocsRender";
  }
});

// node_modules/@storybook/preview-web/dist/esm/PreviewWeb.js
function _typeof2(obj) {
  "@babel/helpers - typeof";
  return _typeof2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj2) {
    return typeof obj2;
  } : function(obj2) {
    return obj2 && "function" == typeof Symbol && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
  }, _typeof2(obj);
}
function asyncGeneratorStep4(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }
  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}
function _asyncToGenerator4(fn) {
  return function() {
    var self = this, args = arguments;
    return new Promise(function(resolve, reject) {
      var gen = fn.apply(self, args);
      function _next(value) {
        asyncGeneratorStep4(gen, resolve, reject, _next, _throw, "next", value);
      }
      function _throw(err) {
        asyncGeneratorStep4(gen, resolve, reject, _next, _throw, "throw", err);
      }
      _next(void 0);
    });
  };
}
function _taggedTemplateLiteral4(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, {
    raw: {
      value: Object.freeze(raw)
    }
  }));
}
function _classCallCheck6(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties6(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass6(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties6(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties6(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
function _get() {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get2(target, property, receiver) {
      var base = _superPropBase(target, property);
      if (!base)
        return;
      var desc = Object.getOwnPropertyDescriptor(base, property);
      if (desc.get) {
        return desc.get.call(arguments.length < 3 ? target : receiver);
      }
      return desc.value;
    };
  }
  return _get.apply(this, arguments);
}
function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf(object);
    if (object === null)
      break;
  }
  return object;
}
function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  Object.defineProperty(subClass, "prototype", {
    writable: false
  });
  if (superClass)
    _setPrototypeOf(subClass, superClass);
}
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf2(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf(o, p);
}
function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn(this, result);
  };
}
function _possibleConstructorReturn(self, call) {
  if (call && (_typeof2(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized(self);
}
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self;
}
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf2(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf(o);
}
function focusInInput(event) {
  var target = event.target;
  return /input|textarea/i.test(target.tagName) || target.getAttribute("contenteditable") !== null;
}
var import_regenerator4, import_es_reflect_construct, import_es_reflect_get, import_runtime4, import_es_regexp_exec5, import_es_array_iterator5, import_es_object_to_string7, import_es_string_iterator5, import_util_deprecate2, import_global6, _templateObject5, _templateObject22, _templateObject32, _templateObject42, globalWindow, PreviewWeb;
var init_PreviewWeb = __esm({
  "node_modules/@storybook/preview-web/dist/esm/PreviewWeb.js"() {
    init_define_ngDevMode();
    import_regenerator4 = __toESM(require_regenerator());
    init_es_object_get_prototype_of();
    import_es_reflect_construct = __toESM(require_es_reflect_construct());
    import_es_reflect_get = __toESM(require_es_reflect_get());
    init_es_object_get_own_property_descriptor();
    init_es_array_slice();
    init_es_object_freeze();
    init_es_symbol_iterator();
    import_runtime4 = __toESM(require_runtime());
    import_es_regexp_exec5 = __toESM(require_es_regexp_exec());
    init_es_object_assign();
    import_es_array_iterator5 = __toESM(require_es_array_iterator());
    import_es_object_to_string7 = __toESM(require_es_object_to_string());
    init_es_promise();
    import_es_string_iterator5 = __toESM(require_es_string_iterator());
    init_web_dom_collections_iterator();
    init_es_array_map();
    init_es_array_filter();
    init_es_symbol();
    init_es_symbol_description();
    init_es_array_concat();
    import_util_deprecate2 = __toESM(require_browser());
    init_esm2();
    import_global6 = __toESM(require_window());
    init_esm3();
    init_esm();
    init_Preview();
    init_UrlStore();
    init_WebView();
    init_StoryRender();
    init_DocsRender();
    globalWindow = import_global6.default.window;
    PreviewWeb = function(_Preview) {
      _inherits(PreviewWeb2, _Preview);
      var _super = _createSuper(PreviewWeb2);
      function PreviewWeb2() {
        var _this;
        _classCallCheck6(this, PreviewWeb2);
        _this = _super.call(this);
        _this.urlStore = void 0;
        _this.view = void 0;
        _this.previewEntryError = void 0;
        _this.currentSelection = void 0;
        _this.currentRender = void 0;
        _this.view = new WebView();
        _this.urlStore = new UrlStore();
        _this.storyStore.getSelection = (0, import_util_deprecate2.default)(function() {
          return _this.urlStore.selection;
        }, esm_default(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral4(["\n        `__STORYBOOK_STORY_STORE__.getSelection()` is deprecated and will be removed in 7.0.\n  \n        To get the current selection, use the `useStoryContext()` hook from `@storybook/addons`.\n      "], ["\n        \\`__STORYBOOK_STORY_STORE__.getSelection()\\` is deprecated and will be removed in 7.0.\n  \n        To get the current selection, use the \\`useStoryContext()\\` hook from \\`@storybook/addons\\`.\n      "]))));
        return _this;
      }
      _createClass6(PreviewWeb2, [{
        key: "setupListeners",
        value: function setupListeners() {
          _get(_getPrototypeOf(PreviewWeb2.prototype), "setupListeners", this).call(this);
          globalWindow.onkeydown = this.onKeydown.bind(this);
          this.channel.on(SET_CURRENT_STORY, this.onSetCurrentStory.bind(this));
          this.channel.on(UPDATE_QUERY_PARAMS, this.onUpdateQueryParams.bind(this));
          this.channel.on(PRELOAD_STORIES, this.onPreloadStories.bind(this));
        }
      }, {
        key: "initializeWithProjectAnnotations",
        value: function initializeWithProjectAnnotations(projectAnnotations) {
          var _this2 = this;
          return _get(_getPrototypeOf(PreviewWeb2.prototype), "initializeWithProjectAnnotations", this).call(this, projectAnnotations).then(function() {
            return _this2.setInitialGlobals();
          });
        }
      }, {
        key: "setInitialGlobals",
        value: function() {
          var _setInitialGlobals = _asyncToGenerator4(import_regenerator4.default.mark(function _callee() {
            var _ref, globals;
            return import_regenerator4.default.wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    _ref = this.urlStore.selectionSpecifier || {}, globals = _ref.globals;
                    if (globals) {
                      this.storyStore.globals.updateFromPersisted(globals);
                    }
                    this.emitGlobals();
                  case 3:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, this);
          }));
          function setInitialGlobals() {
            return _setInitialGlobals.apply(this, arguments);
          }
          return setInitialGlobals;
        }()
      }, {
        key: "initializeWithStoryIndex",
        value: function initializeWithStoryIndex(storyIndex) {
          var _this3 = this;
          return _get(_getPrototypeOf(PreviewWeb2.prototype), "initializeWithStoryIndex", this).call(this, storyIndex).then(function() {
            var _global$FEATURES;
            if (!((_global$FEATURES = import_global6.default.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.storyStoreV7)) {
              _this3.channel.emit(SET_STORIES, _this3.storyStore.getSetStoriesPayload());
            }
            return _this3.selectSpecifiedStory();
          });
        }
      }, {
        key: "selectSpecifiedStory",
        value: function() {
          var _selectSpecifiedStory = _asyncToGenerator4(import_regenerator4.default.mark(function _callee2() {
            var _this$urlStore$select, storySpecifier, viewMode, args, storyId;
            return import_regenerator4.default.wrap(function _callee2$(_context2) {
              while (1) {
                switch (_context2.prev = _context2.next) {
                  case 0:
                    if (this.urlStore.selectionSpecifier) {
                      _context2.next = 3;
                      break;
                    }
                    this.renderMissingStory();
                    return _context2.abrupt("return");
                  case 3:
                    _this$urlStore$select = this.urlStore.selectionSpecifier, storySpecifier = _this$urlStore$select.storySpecifier, viewMode = _this$urlStore$select.viewMode, args = _this$urlStore$select.args;
                    storyId = this.storyStore.storyIndex.storyIdFromSpecifier(storySpecifier);
                    if (storyId) {
                      _context2.next = 8;
                      break;
                    }
                    if (storySpecifier === "*") {
                      this.renderStoryLoadingException(storySpecifier, new Error(esm_default(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral4(["\n            Couldn't find any stories in your Storybook.\n            - Please check your stories field of your main.js config.\n            - Also check the browser console and terminal for error messages.\n          "])))));
                    } else {
                      this.renderStoryLoadingException(storySpecifier, new Error(esm_default(_templateObject32 || (_templateObject32 = _taggedTemplateLiteral4(["\n            Couldn't find story matching '", "'.\n            - Are you sure a story with that id exists?\n            - Please check your stories field of your main.js config.\n            - Also check the browser console and terminal for error messages.\n          "])), storySpecifier)));
                    }
                    return _context2.abrupt("return");
                  case 8:
                    this.urlStore.setSelection({
                      storyId,
                      viewMode
                    });
                    this.channel.emit(STORY_SPECIFIED, this.urlStore.selection);
                    this.channel.emit(CURRENT_STORY_WAS_SET, this.urlStore.selection);
                    _context2.next = 13;
                    return this.renderSelection({
                      persistedArgs: args
                    });
                  case 13:
                  case "end":
                    return _context2.stop();
                }
              }
            }, _callee2, this);
          }));
          function selectSpecifiedStory() {
            return _selectSpecifiedStory.apply(this, arguments);
          }
          return selectSpecifiedStory;
        }()
      }, {
        key: "onGetProjectAnnotationsChanged",
        value: function() {
          var _onGetProjectAnnotationsChanged = _asyncToGenerator4(import_regenerator4.default.mark(function _callee3(_ref2) {
            var getProjectAnnotations;
            return import_regenerator4.default.wrap(function _callee3$(_context3) {
              while (1) {
                switch (_context3.prev = _context3.next) {
                  case 0:
                    getProjectAnnotations = _ref2.getProjectAnnotations;
                    _context3.next = 3;
                    return _get(_getPrototypeOf(PreviewWeb2.prototype), "onGetProjectAnnotationsChanged", this).call(this, {
                      getProjectAnnotations
                    });
                  case 3:
                    this.renderSelection();
                  case 4:
                  case "end":
                    return _context3.stop();
                }
              }
            }, _callee3, this);
          }));
          function onGetProjectAnnotationsChanged(_x) {
            return _onGetProjectAnnotationsChanged.apply(this, arguments);
          }
          return onGetProjectAnnotationsChanged;
        }()
      }, {
        key: "onStoriesChanged",
        value: function() {
          var _onStoriesChanged = _asyncToGenerator4(import_regenerator4.default.mark(function _callee4(_ref3) {
            var _global$FEATURES2;
            var importFn, storyIndex;
            return import_regenerator4.default.wrap(function _callee4$(_context4) {
              while (1) {
                switch (_context4.prev = _context4.next) {
                  case 0:
                    importFn = _ref3.importFn, storyIndex = _ref3.storyIndex;
                    _get(_getPrototypeOf(PreviewWeb2.prototype), "onStoriesChanged", this).call(this, {
                      importFn,
                      storyIndex
                    });
                    if ((_global$FEATURES2 = import_global6.default.FEATURES) !== null && _global$FEATURES2 !== void 0 && _global$FEATURES2.storyStoreV7) {
                      _context4.next = 9;
                      break;
                    }
                    _context4.t0 = this.channel;
                    _context4.t1 = SET_STORIES;
                    _context4.next = 7;
                    return this.storyStore.getSetStoriesPayload();
                  case 7:
                    _context4.t2 = _context4.sent;
                    _context4.t0.emit.call(_context4.t0, _context4.t1, _context4.t2);
                  case 9:
                    if (!this.urlStore.selection) {
                      _context4.next = 14;
                      break;
                    }
                    _context4.next = 12;
                    return this.renderSelection();
                  case 12:
                    _context4.next = 16;
                    break;
                  case 14:
                    _context4.next = 16;
                    return this.selectSpecifiedStory();
                  case 16:
                  case "end":
                    return _context4.stop();
                }
              }
            }, _callee4, this);
          }));
          function onStoriesChanged(_x2) {
            return _onStoriesChanged.apply(this, arguments);
          }
          return onStoriesChanged;
        }()
      }, {
        key: "onKeydown",
        value: function onKeydown(event) {
          var _this$currentRender;
          if (!((_this$currentRender = this.currentRender) !== null && _this$currentRender !== void 0 && _this$currentRender.disableKeyListeners) && !focusInInput(event)) {
            var altKey = event.altKey, ctrlKey = event.ctrlKey, metaKey = event.metaKey, shiftKey = event.shiftKey, key = event.key, code = event.code, keyCode = event.keyCode;
            this.channel.emit(PREVIEW_KEYDOWN, {
              event: {
                altKey,
                ctrlKey,
                metaKey,
                shiftKey,
                key,
                code,
                keyCode
              }
            });
          }
        }
      }, {
        key: "onSetCurrentStory",
        value: function onSetCurrentStory(selection) {
          this.urlStore.setSelection(Object.assign({
            viewMode: "story"
          }, selection));
          this.channel.emit(CURRENT_STORY_WAS_SET, this.urlStore.selection);
          this.renderSelection();
        }
      }, {
        key: "onUpdateQueryParams",
        value: function onUpdateQueryParams(queryParams) {
          this.urlStore.setQueryParams(queryParams);
        }
      }, {
        key: "onUpdateGlobals",
        value: function() {
          var _onUpdateGlobals = _asyncToGenerator4(import_regenerator4.default.mark(function _callee5(_ref4) {
            var globals;
            return import_regenerator4.default.wrap(function _callee5$(_context5) {
              while (1) {
                switch (_context5.prev = _context5.next) {
                  case 0:
                    globals = _ref4.globals;
                    _get(_getPrototypeOf(PreviewWeb2.prototype), "onUpdateGlobals", this).call(this, {
                      globals
                    });
                    if (!(this.currentRender instanceof DocsRender)) {
                      _context5.next = 5;
                      break;
                    }
                    _context5.next = 5;
                    return this.currentRender.rerender(true);
                  case 5:
                  case "end":
                    return _context5.stop();
                }
              }
            }, _callee5, this);
          }));
          function onUpdateGlobals(_x3) {
            return _onUpdateGlobals.apply(this, arguments);
          }
          return onUpdateGlobals;
        }()
      }, {
        key: "onUpdateArgs",
        value: function() {
          var _onUpdateArgs = _asyncToGenerator4(import_regenerator4.default.mark(function _callee6(_ref5) {
            var storyId, updatedArgs;
            return import_regenerator4.default.wrap(function _callee6$(_context6) {
              while (1) {
                switch (_context6.prev = _context6.next) {
                  case 0:
                    storyId = _ref5.storyId, updatedArgs = _ref5.updatedArgs;
                    _get(_getPrototypeOf(PreviewWeb2.prototype), "onUpdateArgs", this).call(this, {
                      storyId,
                      updatedArgs
                    });
                    if (!(this.currentRender instanceof DocsRender)) {
                      _context6.next = 5;
                      break;
                    }
                    _context6.next = 5;
                    return this.currentRender.rerender(false);
                  case 5:
                  case "end":
                    return _context6.stop();
                }
              }
            }, _callee6, this);
          }));
          function onUpdateArgs(_x4) {
            return _onUpdateArgs.apply(this, arguments);
          }
          return onUpdateArgs;
        }()
      }, {
        key: "onPreloadStories",
        value: function() {
          var _onPreloadStories = _asyncToGenerator4(import_regenerator4.default.mark(function _callee7(ids) {
            var _this4 = this;
            return import_regenerator4.default.wrap(function _callee7$(_context7) {
              while (1) {
                switch (_context7.prev = _context7.next) {
                  case 0:
                    _context7.next = 2;
                    return Promise.all(ids.map(function(id) {
                      return _this4.storyStore.loadStory({
                        storyId: id
                      });
                    }));
                  case 2:
                  case "end":
                    return _context7.stop();
                }
              }
            }, _callee7);
          }));
          function onPreloadStories(_x5) {
            return _onPreloadStories.apply(this, arguments);
          }
          return onPreloadStories;
        }()
      }, {
        key: "renderSelection",
        value: function() {
          var _renderSelection = _asyncToGenerator4(import_regenerator4.default.mark(function _callee8() {
            var _this$currentSelectio, _this$currentSelectio2, _lastRender, _this5 = this, _global$FEATURES3;
            var _ref6, persistedArgs, selection, storyId, storyIdChanged, viewModeChanged, lastSelection, lastRender, storyRender, implementationChanged, _storyRender$context, parameters, initialArgs, argTypes, args, _args8 = arguments;
            return import_regenerator4.default.wrap(function _callee8$(_context8) {
              while (1) {
                switch (_context8.prev = _context8.next) {
                  case 0:
                    _ref6 = _args8.length > 0 && _args8[0] !== void 0 ? _args8[0] : {}, persistedArgs = _ref6.persistedArgs;
                    selection = this.urlStore.selection;
                    if (selection) {
                      _context8.next = 4;
                      break;
                    }
                    throw new Error("Cannot render story as no selection was made");
                  case 4:
                    storyId = selection.storyId;
                    storyIdChanged = ((_this$currentSelectio = this.currentSelection) === null || _this$currentSelectio === void 0 ? void 0 : _this$currentSelectio.storyId) !== storyId;
                    viewModeChanged = ((_this$currentSelectio2 = this.currentSelection) === null || _this$currentSelectio2 === void 0 ? void 0 : _this$currentSelectio2.viewMode) !== selection.viewMode;
                    if (selection.viewMode === "story") {
                      this.view.showPreparingStory({
                        immediate: viewModeChanged
                      });
                    } else {
                      this.view.showPreparingDocs();
                    }
                    lastSelection = this.currentSelection;
                    lastRender = this.currentRender;
                    if (!((_lastRender = lastRender) !== null && _lastRender !== void 0 && _lastRender.isPreparing())) {
                      _context8.next = 14;
                      break;
                    }
                    _context8.next = 13;
                    return this.teardownRender(lastRender);
                  case 13:
                    lastRender = null;
                  case 14:
                    storyRender = new StoryRender(this.channel, this.storyStore, function() {
                      _this5.view.showStoryDuringRender();
                      return _this5.renderToDOM.apply(_this5, arguments);
                    }, this.mainStoryCallbacks(storyId), storyId, "story");
                    this.currentSelection = selection;
                    this.currentRender = storyRender;
                    _context8.prev = 17;
                    _context8.next = 20;
                    return storyRender.prepare();
                  case 20:
                    _context8.next = 29;
                    break;
                  case 22:
                    _context8.prev = 22;
                    _context8.t0 = _context8["catch"](17);
                    if (!(_context8.t0 !== PREPARE_ABORTED)) {
                      _context8.next = 28;
                      break;
                    }
                    _context8.next = 27;
                    return this.teardownRender(lastRender);
                  case 27:
                    this.renderStoryLoadingException(storyId, _context8.t0);
                  case 28:
                    return _context8.abrupt("return");
                  case 29:
                    implementationChanged = !storyIdChanged && !storyRender.isEqual(lastRender);
                    if (persistedArgs)
                      this.storyStore.args.updateFromPersisted(storyRender.story, persistedArgs);
                    _storyRender$context = storyRender.context(), parameters = _storyRender$context.parameters, initialArgs = _storyRender$context.initialArgs, argTypes = _storyRender$context.argTypes, args = _storyRender$context.args;
                    if (!(lastRender && !storyIdChanged && !implementationChanged && !viewModeChanged)) {
                      _context8.next = 37;
                      break;
                    }
                    this.currentRender = lastRender;
                    this.channel.emit(STORY_UNCHANGED, storyId);
                    this.view.showMain();
                    return _context8.abrupt("return");
                  case 37:
                    _context8.next = 39;
                    return this.teardownRender(lastRender, {
                      viewModeChanged
                    });
                  case 39:
                    if (lastSelection && (storyIdChanged || viewModeChanged)) {
                      this.channel.emit(STORY_CHANGED, storyId);
                    }
                    if ((_global$FEATURES3 = import_global6.default.FEATURES) !== null && _global$FEATURES3 !== void 0 && _global$FEATURES3.storyStoreV7) {
                      this.channel.emit(STORY_PREPARED, {
                        id: storyId,
                        parameters,
                        initialArgs,
                        argTypes,
                        args
                      });
                    }
                    if (implementationChanged || persistedArgs) {
                      this.channel.emit(STORY_ARGS_UPDATED, {
                        storyId,
                        args
                      });
                    }
                    if (selection.viewMode === "docs" || parameters.docsOnly) {
                      this.currentRender = DocsRender.fromStoryRender(storyRender);
                      this.currentRender.renderToElement(this.view.prepareForDocs(), this.renderStoryToElement.bind(this));
                    } else {
                      this.storyRenders.push(storyRender);
                      this.currentRender.renderToElement(this.view.prepareForStory(storyRender.story));
                    }
                  case 43:
                  case "end":
                    return _context8.stop();
                }
              }
            }, _callee8, this, [[17, 22]]);
          }));
          function renderSelection() {
            return _renderSelection.apply(this, arguments);
          }
          return renderSelection;
        }()
      }, {
        key: "renderStoryToElement",
        value: function renderStoryToElement(story, element) {
          var _this6 = this;
          var render = new StoryRender(this.channel, this.storyStore, this.renderToDOM, this.inlineStoryCallbacks(story.id), story.id, "docs", story);
          render.renderToElement(element);
          this.storyRenders.push(render);
          return _asyncToGenerator4(import_regenerator4.default.mark(function _callee9() {
            return import_regenerator4.default.wrap(function _callee9$(_context9) {
              while (1) {
                switch (_context9.prev = _context9.next) {
                  case 0:
                    _context9.next = 2;
                    return _this6.teardownRender(render);
                  case 2:
                  case "end":
                    return _context9.stop();
                }
              }
            }, _callee9);
          }));
        }
      }, {
        key: "teardownRender",
        value: function() {
          var _teardownRender = _asyncToGenerator4(import_regenerator4.default.mark(function _callee10(render) {
            var _ref8, viewModeChanged, _args10 = arguments;
            return import_regenerator4.default.wrap(function _callee10$(_context10) {
              while (1) {
                switch (_context10.prev = _context10.next) {
                  case 0:
                    _ref8 = _args10.length > 1 && _args10[1] !== void 0 ? _args10[1] : {}, viewModeChanged = _ref8.viewModeChanged;
                    this.storyRenders = this.storyRenders.filter(function(r) {
                      return r !== render;
                    });
                    _context10.next = 4;
                    return render === null || render === void 0 ? void 0 : render.teardown({
                      viewModeChanged
                    });
                  case 4:
                  case "end":
                    return _context10.stop();
                }
              }
            }, _callee10, this);
          }));
          function teardownRender(_x6) {
            return _teardownRender.apply(this, arguments);
          }
          return teardownRender;
        }()
      }, {
        key: "extract",
        value: function() {
          var _extract = _asyncToGenerator4(import_regenerator4.default.mark(function _callee11(options) {
            var _global$FEATURES4;
            return import_regenerator4.default.wrap(function _callee11$(_context11) {
              while (1) {
                switch (_context11.prev = _context11.next) {
                  case 0:
                    if (!this.previewEntryError) {
                      _context11.next = 2;
                      break;
                    }
                    throw this.previewEntryError;
                  case 2:
                    if (this.storyStore.projectAnnotations) {
                      _context11.next = 4;
                      break;
                    }
                    throw new Error(esm_default(_templateObject42 || (_templateObject42 = _taggedTemplateLiteral4(["Failed to initialize Storybook.\n      \n      Do you have an error in your `preview.js`? Check your Storybook's browser console for errors."], ["Failed to initialize Storybook.\n      \n      Do you have an error in your \\`preview.js\\`? Check your Storybook's browser console for errors."]))));
                  case 4:
                    if (!((_global$FEATURES4 = import_global6.default.FEATURES) !== null && _global$FEATURES4 !== void 0 && _global$FEATURES4.storyStoreV7)) {
                      _context11.next = 7;
                      break;
                    }
                    _context11.next = 7;
                    return this.storyStore.cacheAllCSFFiles();
                  case 7:
                    return _context11.abrupt("return", this.storyStore.extract(options));
                  case 8:
                  case "end":
                    return _context11.stop();
                }
              }
            }, _callee11, this);
          }));
          function extract(_x7) {
            return _extract.apply(this, arguments);
          }
          return extract;
        }()
      }, {
        key: "mainStoryCallbacks",
        value: function mainStoryCallbacks(storyId) {
          var _this7 = this;
          return {
            showMain: function showMain() {
              return _this7.view.showMain();
            },
            showError: function showError(err) {
              return _this7.renderError(storyId, err);
            },
            showException: function showException(err) {
              return _this7.renderException(storyId, err);
            }
          };
        }
      }, {
        key: "inlineStoryCallbacks",
        value: function inlineStoryCallbacks(storyId) {
          return {
            showMain: function showMain() {
            },
            showError: function showError(err) {
              return logger.error("Error rendering docs story (".concat(storyId, ")"), err);
            },
            showException: function showException(err) {
              return logger.error("Error rendering docs story (".concat(storyId, ")"), err);
            }
          };
        }
      }, {
        key: "renderPreviewEntryError",
        value: function renderPreviewEntryError(reason, err) {
          _get(_getPrototypeOf(PreviewWeb2.prototype), "renderPreviewEntryError", this).call(this, reason, err);
          this.view.showErrorDisplay(err);
        }
      }, {
        key: "renderMissingStory",
        value: function renderMissingStory() {
          this.view.showNoPreview();
          this.channel.emit(STORY_MISSING);
        }
      }, {
        key: "renderStoryLoadingException",
        value: function renderStoryLoadingException(storySpecifier, err) {
          logger.error("Unable to load story '".concat(storySpecifier, "':"));
          logger.error(err);
          this.view.showErrorDisplay(err);
          this.channel.emit(STORY_MISSING, storySpecifier);
        }
      }, {
        key: "renderException",
        value: function renderException(storyId, err) {
          this.channel.emit(STORY_THREW_EXCEPTION, err);
          this.channel.emit(STORY_RENDER_PHASE_CHANGED, {
            newPhase: "errored",
            storyId
          });
          if (err !== IGNORED_EXCEPTION) {
            this.view.showErrorDisplay(err);
            logger.error("Error rendering story '".concat(storyId, "':"));
            logger.error(err);
          }
        }
      }, {
        key: "renderError",
        value: function renderError(storyId, _ref9) {
          var title = _ref9.title, description = _ref9.description;
          logger.error("Error rendering story ".concat(title, ": ").concat(description));
          this.channel.emit(STORY_ERRORED, {
            title,
            description
          });
          this.channel.emit(STORY_RENDER_PHASE_CHANGED, {
            newPhase: "errored",
            storyId
          });
          this.view.showErrorDisplay({
            message: title,
            stack: description
          });
        }
      }]);
      return PreviewWeb2;
    }(Preview);
  }
});

// node_modules/@storybook/preview-web/dist/esm/simulate-pageload.js
function simulateDOMContentLoaded() {
  var DOMContentLoadedEvent = document3.createEvent("Event");
  DOMContentLoadedEvent.initEvent("DOMContentLoaded", true, true);
  document3.dispatchEvent(DOMContentLoadedEvent);
}
function insertScript($script, callback, $scriptRoot) {
  var scriptEl = document3.createElement("script");
  scriptEl.type = $script.type === "module" ? "module" : "text/javascript";
  if ($script.src) {
    scriptEl.onload = callback;
    scriptEl.onerror = callback;
    scriptEl.src = $script.src;
  } else {
    scriptEl.textContent = $script.innerText;
  }
  if ($scriptRoot)
    $scriptRoot.appendChild(scriptEl);
  else
    document3.head.appendChild(scriptEl);
  $script.parentNode.removeChild($script);
  if (!$script.src)
    callback();
}
function insertScriptsSequentially(scriptsToExecute, callback) {
  var index = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
  scriptsToExecute[index](function() {
    index++;
    if (index === scriptsToExecute.length) {
      callback();
    } else {
      insertScriptsSequentially(scriptsToExecute, callback, index);
    }
  });
}
function simulatePageLoad($container) {
  var $scriptsRoot = document3.getElementById(SCRIPTS_ROOT_ID);
  if (!$scriptsRoot) {
    $scriptsRoot = document3.createElement("div");
    $scriptsRoot.id = SCRIPTS_ROOT_ID;
    document3.body.appendChild($scriptsRoot);
  } else {
    $scriptsRoot.innerHTML = "";
  }
  var $scripts = Array.from($container.querySelectorAll(SCRIPT));
  if ($scripts.length) {
    var scriptsToExecute = [];
    $scripts.forEach(function($script) {
      var typeAttr = $script.getAttribute("type");
      if (!typeAttr || runScriptTypes.includes(typeAttr)) {
        scriptsToExecute.push(function(callback) {
          return insertScript($script, callback, $scriptsRoot);
        });
      }
    });
    if (scriptsToExecute.length) {
      insertScriptsSequentially(scriptsToExecute, simulateDOMContentLoaded, void 0);
    }
  } else {
    simulateDOMContentLoaded();
  }
}
var import_es_string_iterator6, import_es_object_to_string8, import_global7, document3, runScriptTypes, SCRIPT, SCRIPTS_ROOT_ID;
var init_simulate_pageload = __esm({
  "node_modules/@storybook/preview-web/dist/esm/simulate-pageload.js"() {
    init_define_ngDevMode();
    init_es_array_from();
    import_es_string_iterator6 = __toESM(require_es_string_iterator());
    import_es_object_to_string8 = __toESM(require_es_object_to_string());
    init_web_dom_collections_for_each();
    init_es_array_includes();
    import_global7 = __toESM(require_window());
    document3 = import_global7.default.document;
    runScriptTypes = [
      "application/javascript",
      "application/ecmascript",
      "application/x-ecmascript",
      "application/x-javascript",
      "text/ecmascript",
      "text/javascript",
      "text/javascript1.0",
      "text/javascript1.1",
      "text/javascript1.2",
      "text/javascript1.3",
      "text/javascript1.4",
      "text/javascript1.5",
      "text/jscript",
      "text/livescript",
      "text/x-ecmascript",
      "text/x-javascript",
      "module"
    ];
    SCRIPT = "script";
    SCRIPTS_ROOT_ID = "scripts-root";
  }
});

// node_modules/@storybook/preview-web/dist/esm/types.js
var init_types = __esm({
  "node_modules/@storybook/preview-web/dist/esm/types.js"() {
    init_define_ngDevMode();
  }
});

// node_modules/@storybook/preview-web/dist/esm/index.js
var init_esm5 = __esm({
  "node_modules/@storybook/preview-web/dist/esm/index.js"() {
    init_define_ngDevMode();
    init_esm4();
    init_Preview();
    init_PreviewWeb();
    init_simulate_pageload();
    init_types();
  }
});

export {
  Preview,
  PreviewWeb,
  simulateDOMContentLoaded,
  simulatePageLoad,
  init_esm5 as init_esm
};
//# sourceMappingURL=chunk-WP637L6E.js.map
